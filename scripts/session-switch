#!/bin/zsh
# Mode-aware session switch
# Overlay mode: opens tms switch in popup overlay
# Switch mode: instantly switch to last session, or next if no last

mode=$(tmux show-option -gqv @slot_mode)

if [[ "$mode" == "switch" ]]; then
    tmux switch-client -l 2>/dev/null || tmux switch-client -n
else
    tmux display-popup -E "tms switch"
fi
